# =============================================================================
# Mosquitto MQTT Broker Configuration for ISIC Testing
# =============================================================================

# -----------------------------------------------------------------------------
# General Settings
# -----------------------------------------------------------------------------
# Allow connections without authentication (for testing only!)
allow_anonymous true

# Persistence settings
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type all
connection_messages true
log_timestamp true

# -----------------------------------------------------------------------------
# MQTT Listener (Port 1883)
# -----------------------------------------------------------------------------
listener 1883 0.0.0.0
protocol mqtt

# -----------------------------------------------------------------------------
# WebSocket Listener (Port 9001)
# -----------------------------------------------------------------------------
# Useful for web-based MQTT clients and debugging tools
listener 9001 0.0.0.0
protocol websockets

# -----------------------------------------------------------------------------
# Message Settings
# -----------------------------------------------------------------------------
# Maximum packet size (256KB - enough for OTA commands)
max_packet_size 262144

# Maximum queued messages per client
max_queued_messages 1000

# Retain messages
retain_available true

# -----------------------------------------------------------------------------
# Security Notes
# -----------------------------------------------------------------------------
# WARNING: This configuration allows anonymous access and is intended
# for LOCAL DEVELOPMENT AND TESTING ONLY.
#
# For production, you should:
# 1. Set allow_anonymous false
# 2. Configure password_file or use authentication plugins
# 3. Enable TLS/SSL encryption
# 4. Restrict access via ACL (access control lists)
#
# Example production additions:
# allow_anonymous false
# password_file /mosquitto/config/passwd
# acl_file /mosquitto/config/acl
# listener 8883
# certfile /mosquitto/certs/server.crt
# keyfile /mosquitto/certs/server.key
# cafile /mosquitto/certs/ca.crt
